<p class="has-line-data" data-line-start="0" data-line-end="1">å•Šï¼Œå®Œå…¨ç†è§£è¿™ä¸ªâ€œå°´å°¬â€ï¼ ğŸ˜„ è¿™ç¡®å®æ˜¯ä¸€ä¸ªéå¸¸å…³é”®çš„ä¿¡æ¯ï¼Œå®ƒå½»åº•æ”¹å˜äº†æˆ‘ä»¬ä¹‹å‰å…³äº Django é¡µé¢æ¸²æŸ“å’Œè·³è½¬çš„è®¨è®ºæ–¹å‘ã€‚</p>
<p class="has-line-data" data-line-start="2" data-line-end="3">æ—¢ç„¶å·¥ä½œæµå¼•æ“çš„å‰ç«¯æ˜¯ <strong>React å•é¡µåº”ç”¨ (SPA)</strong>ï¼Œé‚£ä¹ˆï¼š</p>
<ul>
<li class="has-line-data" data-line-start="4" data-line-end="5"><strong>ä¸å†æœ‰ Django æ¨¡æ¿æ¸²æŸ“</strong>: å¯¹äºå·¥ä½œæµå¼•æ“éƒ¨åˆ†ï¼ŒDjango ä¸ä¼šè´Ÿè´£æ¸²æŸ“ <code>workflows/task_list.html</code> è¿™æ ·çš„æ¨¡æ¿ã€‚æ•´ä¸ªå‰ç«¯ç•Œé¢æ˜¯ç”±æµè§ˆå™¨ä¸­çš„ JavaScript (React) æ„å»ºçš„ã€‚</li>
<li class="has-line-data" data-line-start="5" data-line-end="6"><strong>å®¢æˆ·ç«¯è·¯ç”±</strong>: React åº”ç”¨å†…éƒ¨ä¼šä½¿ç”¨ä¸€ä¸ªè·¯ç”±åº“ï¼ˆå¾ˆå¯èƒ½æ˜¯ <code>react-router-dom</code>ï¼‰æ¥å¤„ç†é¡µé¢é—´çš„å¯¼èˆªï¼ˆä¾‹å¦‚ä»ä»»åŠ¡åˆ—è¡¨åˆ‡æ¢åˆ°è®¾è®¡å™¨ï¼‰ã€‚æµè§ˆå™¨åœ°å€æ çš„ URL å˜åŒ–ï¼ˆæ¯”å¦‚å˜æˆ <code>/workflows/tasks</code> æˆ– <code>/workflows/designer/123</code>ï¼‰æ˜¯ç”± React Router æ•è·å¹¶ç”¨äºæ¸²æŸ“ä¸åŒçš„ React ç»„ä»¶ï¼Œè€Œä¸æ˜¯å‘ Django åç«¯è¯·æ±‚ä¸€ä¸ªæ–°çš„ HTML é¡µé¢ã€‚</li>
<li class="has-line-data" data-line-start="6" data-line-end="11"><strong>Django çš„è§’è‰²</strong>: å¯¹äº React SPA æ¥è¯´ï¼ŒDjango çš„ä¸»è¦è§’è‰²å˜æˆäº†ï¼š
<ol>
<li class="has-line-data" data-line-start="7" data-line-end="8"><strong>æä¾› API</strong>: é€šè¿‡æˆ‘ä»¬ä¹‹å‰é…ç½®çš„ <code>/api/workflows/...</code> ç«¯ç‚¹æä¾›æ•°æ®å’Œæ‰§è¡Œæ“ä½œã€‚React ç»„ä»¶ä¼šé€šè¿‡ <code>fetch</code> æˆ– <code>axios</code> è°ƒç”¨è¿™äº› APIã€‚</li>
<li class="has-line-data" data-line-start="8" data-line-end="9"><strong>æä¾›å…¥å£</strong>: éœ€è¦æœ‰ä¸€ä¸ª Django URL æ¥æä¾› React åº”ç”¨çš„â€œå¤–å£³â€â€”â€”å³ <code>frontend/build/index.html</code> æ–‡ä»¶ï¼ˆæˆ–å…¶ä»–æ„å»ºè¾“å‡ºçš„ä¸» HTML æ–‡ä»¶ï¼‰ã€‚ç”¨æˆ·é¦–æ¬¡è®¿é—® React åº”ç”¨æ—¶ï¼ŒDjango éœ€è¦å‘é€è¿™ä¸ª HTML æ–‡ä»¶ç»™æµè§ˆå™¨ã€‚</li>
<li class="has-line-data" data-line-start="9" data-line-end="11"><strong>è®¤è¯ä¸æˆæƒ</strong>: é€šè¿‡ API ç«¯ç‚¹çš„æƒé™æ£€æŸ¥ï¼ˆæ¯”å¦‚æˆ‘ä»¬é…ç½®çš„ <code>CanUseWorkflows</code>ï¼‰æ¥ä¿æŠ¤åç«¯èµ„æºã€‚</li>
</ol>
</li>
</ul>
<p class="has-line-data" data-line-start="11" data-line-end="12"><strong>ç°åœ¨æˆ‘ä»¬é‡æ–°æ¥çœ‹ä½ çš„é—®é¢˜ï¼šå¦‚ä½•ä» <code>myapp</code> (Django æ¸²æŸ“) è·³è½¬åˆ° <code>workflows</code> (React SPA) å¹¶ä¿æŒ Sessionï¼Ÿ</strong></p>
<p class="has-line-data" data-line-start="13" data-line-end="14"><strong>å¥½æ¶ˆæ¯ï¼šSession ä¿æŒæ˜¯è‡ªåŠ¨çš„ï¼</strong></p>
<p class="has-line-data" data-line-start="15" data-line-end="16">åªè¦ <code>myapp</code> å’ŒåŠ è½½ React SPA çš„ URL å±äºåŒä¸€ä¸ª Django é¡¹ç›®ï¼ˆåœ¨åŒä¸€ä¸ªåŸŸåä¸‹ï¼‰ï¼Œå¹¶ä¸”ä½ çš„ Session é…ç½®æ­£ç¡®ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨å‘é€ <code>sessionid</code> Cookieï¼ŒDjango åç«¯çš„ <code>SessionMiddleware</code> ä¼šè‡ªåŠ¨ä¸ºä½ åŠ è½½ <code>request.session</code>ã€‚è¿™å¯¹äºåŠ è½½ React SPA çš„å…¥å£ HTML è¯·æ±‚å’Œ React SPA å‘å‡ºçš„æ‰€æœ‰ API è¯·æ±‚éƒ½æœ‰æ•ˆã€‚</p>
<p class="has-line-data" data-line-start="17" data-line-end="18"><strong>æ ¸å¿ƒé—®é¢˜ï¼šå¦‚ä½•é…ç½® URL ä»¥åŠ è½½ React SPAï¼Ÿ</strong></p>
<p class="has-line-data" data-line-start="19" data-line-end="20">ä½ éœ€è¦ä¸€ä¸ª Django URL å’Œè§†å›¾æ¥æä¾› React åº”ç”¨çš„å…¥å£ç‚¹ (<code>index.html</code>)ã€‚</p>
<p class="has-line-data" data-line-start="21" data-line-end="22"><strong>æ–¹æ¡ˆï¼šè®© Django åœ¨ç‰¹å®šè·¯å¾„ä¸‹æä¾› React åº”ç”¨</strong></p>
<p class="has-line-data" data-line-start="23" data-line-end="24">å‡è®¾ä½ å¸Œæœ›ç”¨æˆ·é€šè¿‡è®¿é—® <code>/workflows/</code> è¿™ä¸ªåŸºç¡€è·¯å¾„æ¥åŠ è½½å’Œä½¿ç”¨ React å·¥ä½œæµåº”ç”¨ã€‚</p>
<ol>
<li class="has-line-data" data-line-start="25" data-line-end="68">
<p class="has-line-data" data-line-start="25" data-line-end="26"><strong>é…ç½® Django è§†å›¾æ¥æä¾› <code>index.html</code></strong>:</p>
<ul>
<li class="has-line-data" data-line-start="26" data-line-end="27">ä½ éœ€è¦ä¸€ä¸ªè§†å›¾ï¼Œå®ƒçš„ä½œç”¨ä»…ä»…æ˜¯è¿”å›ç”± Vite æ„å»ºäº§ç”Ÿçš„ <code>index.html</code> æ–‡ä»¶ã€‚è¿™ä¸ªæ–‡ä»¶é€šå¸¸ä½äº <code>frontend/dist/index.html</code>ï¼ˆæˆ–è€…ä½  <code>vite.config.js</code> ä¸­ <code>build.outDir</code> æŒ‡å®šçš„å…¶ä»–ä½ç½®ï¼‰ã€‚</li>
<li class="has-line-data" data-line-start="27" data-line-end="29"><strong>é‡è¦</strong>: è®¿é—®è¿™ä¸ª React åº”ç”¨çš„å…¥å£æœ¬èº«ä¹Ÿéœ€è¦ç™»å½•ä¿æŠ¤ã€‚</li>
</ul>
<pre><code class="has-line-data" data-line-start="30" data-line-end="66" class="language-python"><span class="hljs-comment"># workflows/views.py</span>
<span class="hljs-keyword">from</span> django.shortcuts <span class="hljs-keyword">import</span> render
<span class="hljs-keyword">from</span> django.conf <span class="hljs-keyword">import</span> settings
<span class="hljs-keyword">import</span> os
<span class="hljs-comment"># from .permissions import custom_login_required # ä½¿ç”¨ä½ çš„è‡ªå®šä¹‰è£…é¥°å™¨</span>

<span class="hljs-decorator">@custom_login_required # ä¿æŠ¤è¿™ä¸ªå…¥å£è§†å›¾</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">workflow_spa_entry</span><span class="hljs-params">(request, *args, **kwargs)</span>:</span>
    <span class="hljs-string">"""
    æä¾› React SPA çš„å…¥å£ index.htmlã€‚
    """</span>
    <span class="hljs-comment"># æ³¨æ„ï¼šè¿™é‡Œçš„è·¯å¾„éœ€è¦æ ¹æ®ä½ çš„é¡¹ç›®ç»“æ„å’Œ Vite æ„å»ºè¾“å‡ºä½ç½®è°ƒæ•´</span>
    <span class="hljs-comment"># é€šå¸¸ Vite æ„å»ºè¾“å‡ºåœ¨ frontend/dist/ æˆ– settings.py ä¸­é…ç½®çš„ STATIC_ROOT ä¸‹çš„æŸä¸ªå­ç›®å½•</span>
    <span class="hljs-comment"># index_html_path = os.path.join(settings.STATIC_ROOT, 'frontend', 'index.html')</span>
    <span class="hljs-comment"># æˆ–è€…ï¼Œå¦‚æœ 'frontend/dist' ç›´æ¥åœ¨ä½ çš„ TEMPLATES DIRS ä¸‹ï¼š</span>
    <span class="hljs-comment"># return render(request, 'frontend/dist/index.html')</span>

    <span class="hljs-comment"># å‡è®¾ Vite çš„ build.outDir æ˜¯ '../staticfiles/frontend' (ç›¸å¯¹äº vite.config.js)</span>
    <span class="hljs-comment"># å¹¶ä¸”ä½ çš„ Django settings.py ä¸­çš„ STATICFILES_DIRS åŒ…å«äº†è¿™ä¸ª 'staticfiles' ç›®å½•</span>
    <span class="hljs-comment"># æˆ–è€…è¿™ä¸ªæ„å»ºè¾“å‡ºç›®å½•è¢«åŒ…å«åœ¨äº† TEMPLATES çš„ DIRS è®¾ç½®ä¸­</span>
    <span class="hljs-comment"># æœ€ç®€å•çš„æ–¹å¼å¯èƒ½æ˜¯ç›´æ¥æ¸²æŸ“è¿™ä¸ªæ–‡ä»¶ï¼Œå¦‚æœå®ƒåœ¨æ¨¡æ¿ç›®å½•ä¸­</span>
    <span class="hljs-comment"># ç¡®ä¿ Django çš„ TEMPLATES è®¾ç½®èƒ½æ‰¾åˆ°è¿™ä¸ªæ–‡ä»¶</span>
    <span class="hljs-comment"># ä¾‹å¦‚ TEMPLATES = [{'DIRS': [BASE_DIR / 'staticfiles'], ...}]</span>
    <span class="hljs-keyword">try</span>:
         <span class="hljs-comment"># å°è¯•æ¸²æŸ“ä½äº 'staticfiles/frontend/index.html' çš„æ–‡ä»¶</span>
         <span class="hljs-comment"># ç¡®ä¿ Django çš„æ¨¡æ¿åŠ è½½å™¨èƒ½æ‰¾åˆ°è¿™ä¸ªè·¯å¾„</span>
         <span class="hljs-comment"># æˆ–è€…ä½ å¯èƒ½éœ€è¦æ›´å¤æ‚çš„é€»è¾‘æ¥ç¡®å®šæ­£ç¡®çš„é™æ€æ–‡ä»¶è·¯å¾„</span>
         <span class="hljs-keyword">return</span> render(request, <span class="hljs-string">'frontend/index.html'</span>)
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
         <span class="hljs-comment"># å¤„ç†æ‰¾ä¸åˆ°æ–‡ä»¶æˆ–å…¶ä»–é”™è¯¯</span>
         <span class="hljs-keyword">from</span> django.http <span class="hljs-keyword">import</span> HttpResponseNotFound
         print(f<span class="hljs-string">"Error rendering SPA entry: {e}"</span>) <span class="hljs-comment"># è°ƒè¯•ä¿¡æ¯</span>
         <span class="hljs-keyword">return</span> HttpResponseNotFound(<span class="hljs-string">"Workflow application not found."</span>)

<span class="hljs-comment"># ... ä½ å…¶ä»–çš„ API è§†å›¾ ...</span>
</code></pre>
<ul>
<li class="has-line-data" data-line-start="66" data-line-end="68"><strong>è·¯å¾„é—®é¢˜</strong>: æ­£ç¡®æ‰¾åˆ°å¹¶æä¾› <code>index.html</code> çš„è·¯å¾„æ˜¯è¿™é‡Œçš„å…³é”®ã€‚ä½ éœ€è¦ç¡®ä¿ Django çš„æ¨¡æ¿è®¾ç½® (<code>TEMPLATES['DIRS']</code>) æˆ–é™æ€æ–‡ä»¶è®¾ç½® (<code>STATICFILES_DIRS</code>) èƒ½å¤Ÿè®© Django æ‰¾åˆ° Vite æ„å»ºå‡ºçš„ <code>index.html</code>ã€‚<code>vite.config.js</code> ä¸­çš„ <code>build.outDir: '../staticfiles/frontend'</code> æ„å‘³ç€æ„å»ºç»“æœåœ¨ <code>frontend</code> ç›®å½•çš„<strong>ä¸Šä¸€çº§</strong>çš„ <code>staticfiles/frontend</code> ç›®å½•ä¸­ã€‚ä½ éœ€è¦è®© Django çŸ¥é“è¿™ä¸ª <code>staticfiles</code> ç›®å½•ã€‚</li>
</ul>
</li>
<li class="has-line-data" data-line-start="68" data-line-end="107">
<p class="has-line-data" data-line-start="68" data-line-end="69"><strong>é…ç½® URL è·¯ç”±</strong>:</p>
<ul>
<li class="has-line-data" data-line-start="69" data-line-end="70">æˆ‘ä»¬éœ€è¦ä¸€ä¸ª URL æ¨¡å¼æŒ‡å‘è¿™ä¸ª <code>workflow_spa_entry</code> è§†å›¾ã€‚</li>
<li class="has-line-data" data-line-start="70" data-line-end="72">ä¸ºäº†è®© React Router èƒ½å¤Ÿå¤„ç† <code>/workflows/tasks</code>, <code>/workflows/designer/123</code> ç­‰è·¯å¾„ï¼ˆåŒ…æ‹¬æµè§ˆå™¨åˆ·æ–°æ—¶ï¼‰ï¼Œæˆ‘ä»¬é€šå¸¸éœ€è¦ä¸€ä¸ªâ€œé€šé…ç¬¦â€è·¯ç”±ï¼Œå°† <code>/workflows/</code> ä¸‹çš„æ‰€æœ‰æœªè¢« API è·¯ç”±åŒ¹é…çš„è·¯å¾„éƒ½æŒ‡å‘è¿™ä¸ªå…¥å£è§†å›¾ã€‚</li>
</ul>
<pre><code class="has-line-data" data-line-start="73" data-line-end="104" class="language-python"><span class="hljs-comment"># workflows/urls.py (æˆ–è€…ä¸» urls.py)</span>
<span class="hljs-keyword">from</span> django.urls <span class="hljs-keyword">import</span> path, re_path, include <span class="hljs-comment"># å¯¼å…¥ re_path</span>
<span class="hljs-keyword">from</span> . <span class="hljs-keyword">import</span> views

<span class="hljs-comment"># ... (ä½ çš„ API router å’Œ api_urlpatterns å®šä¹‰ä¿æŒä¸å˜) ...</span>
api_urlpatterns = [
    path(<span class="hljs-string">''</span>, include(router.urls)),
    path(<span class="hljs-string">'designer/config/'</span>, views.WorkflowDesignerConfigView.as_view(), name=<span class="hljs-string">'workflow-designer-config'</span>),
]

<span class="hljs-comment"># é¡µé¢/SPA å…¥å£ URL</span>
page_urlpatterns = [
    <span class="hljs-comment"># ï¼ï¼ï¼ä¸º React SPA å®šä¹‰å…¥å£è§†å›¾ï¼ï¼ï¼</span>
    <span class="hljs-comment"># åŒ¹é… /workflows/ (åŸºç¡€è·¯å¾„)</span>
    path(<span class="hljs-string">''</span>, views.workflow_spa_entry, name=<span class="hljs-string">'workflow_spa_index'</span>),

    <span class="hljs-comment"># ï¼ï¼ï¼é€šé…ç¬¦è·¯ç”±ï¼Œæ•è·æ‰€æœ‰ workflows/ ä¸‹çš„è·¯å¾„ï¼Œäº¤ç»™å‰ç«¯è·¯ç”±å¤„ç†ï¼ï¼ï¼</span>
    <span class="hljs-comment"># ç¡®ä¿è¿™ä¸ªæ”¾åœ¨å…¶ä»–å…·ä½“è·¯å¾„ä¹‹åï¼Œæˆ–è€…ç¡®ä¿å®ƒä¸ä¼šæ„å¤–æ•è· API è·¯å¾„</span>
    <span class="hljs-comment"># ä½¿ç”¨ re_path æ¥åŒ¹é…ä»»ä½•å­—ç¬¦ (.)*</span>
    re_path(<span class="hljs-string">r'^(?:.*)/$'</span>, views.workflow_spa_entry, name=<span class="hljs-string">'workflow_spa_catchall'</span>),
    <span class="hljs-comment"># å¯èƒ½è¿˜éœ€è¦ä¸€ä¸ªä¸å¸¦æœ«å°¾æ–œæ çš„ç‰ˆæœ¬ï¼Œå–å†³äºä½ çš„æœåŠ¡å™¨é…ç½®</span>
    re_path(<span class="hljs-string">r'^(?:.*)$'</span>, views.workflow_spa_entry, name=<span class="hljs-string">'workflow_spa_catchall_no_slash'</span>),

    <span class="hljs-comment"># æ³¨æ„ï¼šå¦‚æœä½ æœ‰å…¶ä»–æ˜ç¡®çš„ Django æ¸²æŸ“çš„é¡µé¢ï¼Œéœ€è¦æ”¾åœ¨é€šé…ç¬¦ä¹‹å‰</span>
    <span class="hljs-comment"># path('some-django-page/', views.some_view, name='some_page'),</span>
]

<span class="hljs-comment"># ä¸»é¡¹ç›® urls.py ä¸­åˆ†åˆ« include</span>
<span class="hljs-comment"># path('api/workflows/', include((api_urlpatterns, 'workflows-api'), namespace='workflows-api')),</span>
<span class="hljs-comment"># path('workflows/', include((page_urlpatterns, 'workflows-pages'), namespace='workflows-pages')),</span>
</code></pre>
<ul>
<li class="has-line-data" data-line-start="104" data-line-end="105"><code>path('', ... name='workflow_spa_index')</code> å¤„ç† <code>/workflows/</code> è¿™ä¸ªåŸºç¡€è·¯å¾„ã€‚</li>
<li class="has-line-data" data-line-start="105" data-line-end="107"><code>re_path(r'^(?:.*)/$', ...)</code> å’Œ <code>re_path(r'^(?:.*)$', ...)</code> æ˜¯å…³é”®ï¼Œå®ƒä»¬åŒ¹é… <code>/workflows/</code> ä¸‹é¢çš„<strong>ä»»ä½•è·¯å¾„</strong>ï¼ˆä¾‹å¦‚ <code>/workflows/tasks</code>, <code>/workflows/designer/123</code> ç­‰ï¼‰ï¼Œå¹¶å°†è¯·æ±‚<strong>å…¨éƒ¨äº¤ç»™</strong> <code>workflow_spa_entry</code> è§†å›¾ã€‚è¿™ä¸ªè§†å›¾åªè¿”å› <code>index.html</code>ï¼Œç„¶åæµè§ˆå™¨ä¸­çš„ React Router ä¼šè¯»å– URL (<code>/workflows/tasks</code>) å¹¶æ¸²æŸ“æ­£ç¡®çš„ç»„ä»¶ã€‚</li>
</ul>
</li>
<li class="has-line-data" data-line-start="107" data-line-end="120">
<p class="has-line-data" data-line-start="107" data-line-end="109"><strong>ä¿®æ”¹ <code>myapp</code> æ¨¡æ¿ä¸­çš„é“¾æ¥</strong>:<br>
é“¾æ¥çš„ç›®æ ‡åº”è¯¥æ˜¯åŠ è½½ React SPA çš„åŸºç¡€è·¯å¾„ã€‚</p>
<pre><code class="has-line-data" data-line-start="111" data-line-end="118" class="language-html">{# myapp/templates/myapp/some_template.html #}
{# æŒ‡å‘åŠ è½½ React SPA çš„åŸºç¡€ URL #}
<span class="hljs-tag">&lt;<span class="hljs-title">a</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"{% url 'workflows-pages:workflow_spa_index' %}"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"nav-item"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">i</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"fas fa-tasks"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">i</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">span</span>&gt;</span>ä»»åŠ¡<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> {# æˆ–è€…æ”¹ä¸º "å·¥ä½œæµ" #}
<span class="hljs-tag">&lt;/<span class="hljs-title">a</span>&gt;</span>
</code></pre>
<ul>
<li class="has-line-data" data-line-start="118" data-line-end="120">ç°åœ¨ <code>{% url %}</code> æŒ‡å‘çš„æ˜¯åä¸º <code>workflow_spa_index</code> çš„ URLï¼Œå®ƒä¼šæ¸²æŸ“ React åº”ç”¨çš„å…¥å£ã€‚</li>
</ul>
</li>
</ol>
<p class="has-line-data" data-line-start="120" data-line-end="121"><strong>æ€»ç»“ä¸åç»­æ­¥éª¤:</strong></p>
<ol>
<li class="has-line-data" data-line-start="122" data-line-end="123"><strong>ç¡®è®¤ React SPA å…¥å£</strong>: ç¡®å®šä½ çš„ React åº”ç”¨ (<code>frontend</code>) æ„å»ºåçš„ <code>index.html</code> æ–‡ä»¶çš„ç¡®åˆ‡ä½ç½®ï¼Œå¹¶é…ç½® Django çš„ <code>settings.py</code> ( <code>TEMPLATES['DIRS']</code> æˆ– <code>STATICFILES_DIRS</code>) è®© Django èƒ½å¤Ÿæ‰¾åˆ°å®ƒã€‚</li>
<li class="has-line-data" data-line-start="123" data-line-end="124"><strong>åˆ›å»ºå…¥å£è§†å›¾</strong>: åœ¨ <code>workflows/views.py</code> ä¸­åˆ›å»º <code>workflow_spa_entry</code> è§†å›¾ï¼Œå¹¶ç”¨ <code>@custom_login_required</code> ä¿æŠ¤ï¼Œç¡®ä¿å®ƒèƒ½æ­£ç¡®æ¸²æŸ“ <code>index.html</code>ã€‚</li>
<li class="has-line-data" data-line-start="124" data-line-end="125"><strong>é…ç½® URL</strong>: åœ¨ <code>workflows/urls.py</code> ä¸­æ·»åŠ  <code>path('', ...)</code> å’Œ <code>re_path(r'^(?:.*)...', ...)</code> æŒ‡å‘å…¥å£è§†å›¾ï¼Œå¹¶ç»™åŸºç¡€è·¯å¾„ URL å‘½å (e.g., <code>workflow_spa_index</code>)ã€‚</li>
<li class="has-line-data" data-line-start="125" data-line-end="126"><strong>åˆ†ç¦» API å’Œé¡µé¢è·¯ç”±</strong>: åœ¨ä¸»é¡¹ç›® <code>urls.py</code> ä¸­ä½¿ç”¨ä¸åŒå‰ç¼€ <code>/api/workflows/</code> å’Œ <code>/workflows/</code> åˆ†åˆ«åŒ…å« API è·¯ç”±å’Œ SPA å…¥å£è·¯ç”±ã€‚</li>
<li class="has-line-data" data-line-start="126" data-line-end="127"><strong>æ›´æ–°æ¨¡æ¿é“¾æ¥</strong>: ä¿®æ”¹ <code>myapp</code> æ¨¡æ¿ä¸­çš„é“¾æ¥ï¼Œä½¿ç”¨ <code>{% url 'workflows-pages:workflow_spa_index' %}</code> æŒ‡å‘ SPA çš„å…¥å£ã€‚</li>
<li class="has-line-data" data-line-start="127" data-line-end="129"><strong>é…ç½® React Router</strong>: åœ¨ä½ çš„ React åº”ç”¨ (<code>frontend/src</code>) ä¸­ï¼Œç¡®ä¿ <code>react-router-dom</code> çš„ <code>BrowserRouter</code> é…ç½®äº† <code>basename=&quot;/workflows&quot;</code>ï¼ˆå¦‚æœä½ çš„å…¥å£ URL æ˜¯ <code>/workflows/</code>ï¼‰ï¼Œè¿™æ ·å®ƒæ‰èƒ½æ­£ç¡®åŒ¹é… <code>/tasks</code>, <code>/designer/:id</code> ç­‰ç›¸å¯¹è·¯å¾„ã€‚</li>
</ol>
<p class="has-line-data" data-line-start="129" data-line-end="130">è¿™ä¸ªæµç¨‹ç¨å¾®å¤æ‚ä¸€äº›ï¼Œå› ä¸ºå®ƒæ¶‰åŠåˆ° Django å’Œ React SPA çš„é›†æˆã€‚å…³é”®æ˜¯ç†è§£ Django ç°åœ¨ä¸»è¦è´Ÿè´£ API å’Œæä¾› SPA çš„åˆå§‹ HTMLï¼Œè€Œé¡µé¢å†…çš„å¯¼èˆªç”± React Router å¤„ç†ã€‚</p>